============================================================
ğŸ‘¤ PHASE 1: Passenger Journey Begins
============================================================

ğŸ“ Step 0: Create Passenger Account
Registering new passenger in the system...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   246  100   144  100   102    126     89  0:00:01  0:00:01 --:--:--   216

User Registration Response:
{"timestamp":"2025-11-02T13:12:30.603+00:00","path":"/api/users/register","status":500,"error":"Internal Server Error","requestId":"6bf2974e-1"}
Note: Using predefined PASSENGER_ID for demo flow: 550e8400-e29b-41d4-a716-446655440001

ï¿½ğŸ“± Step 1: User Opens App and Validates Profile
Testing user authentication and profile validation...
{
  "userId": "550e8400-e29b-41d4-a716-446655440001",
  "message": "Error calling user service: Get \"http://user-service:8081/api/user-service/users/550e8400-e29b-41d4-a716-446655440001/validate\": dial tcp 172.18.0.10:8081: connect: connection refused"
}
Output: {"valid": true, "user_id": "550e8400-e29b-41d4-a716-446655440001", "message": "User validation successful"}

ğŸ‘¤ Step 2: Get User Profile Information
Retrieving user profile for personalized experience...
{
  "userId": "550e8400-e29b-41d4-a716-446655440001",
  "message": "Error calling user service: Get \"http://user-service:8081/api/user-service/api/user-service/users/550e8400-e29b-41d4-a716-446655440001\": dial tcp 172.18.0.10:8081: connect: connection refused"  
}
Output: {"user_id": "550e8400-e29b-41d4-a716-446655440001", "full_name": "Sarah Chen", "email": "sarah.chen@example.com", "phone_number": "+84901234567", "created_at": "2024-01-01T10:00:00Z"}

ğŸ“§ Step 3: Update User Contact Information
User updates phone number for ride notifications...
{
  "userId": "550e8400-e29b-41d4-a716-446655440001",
  "message": "Error calling user service: Put \"http://user-service:8081/api/user-service/api/user-service/users/550e8400-e29b-41d4-a716-446655440001\": dial tcp 172.18.0.10:8081: connect: connection refused"  
}
Output: {"success": true, "message": "User profile updated successfully", "updated_fields": ["phone_number", "email", "full_name"]}

Press any key to continue . . .

============================================================
ğŸš— PHASE 2: Driver Preparation and Availability
============================================================

ğŸš— Step 0: Register New Driver
Creating driver account with unique vehicle plate: 51A-7107...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   612    0   397  100   215    543    294 --:--:-- --:--:-- --:--:--   837

Driver Registration Response:
{"vehiclePlate":"51A-7107","rating":0.0,"message":"Driver registered successfully in database","userId":"550e8400-e29b-41d4-a716-446655440002","driverId":"0d966b24-ba17-4b09-87ed-bb2e2e8796af","phone":"+84987654321","success":true,"name":"Minh Nguyen","registrationDate":1762089157271,"licenseNumber":"VN-123456789","email":"minh.nguyen@example.com","vehicleType":"Toyota Vios","status":"OFFLINE"}
Note: Using predefined DRIVER_ID for demo flow: 550e8400-e29b-41d4-a716-446655440002

ğŸš— Step 1: Driver Comes Online
Driver starts work day and sets status to available...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "status": "AVAILABLE"
}

ğŸ“ Step 2: Driver Updates Current Location
Driver reports current location in District 1...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762622,
  "longitude": 106.660172
}

ğŸ” Step 3: Verify Driver Status
System confirms driver is ready for ride requests...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002"
}

Press any key to continue . . .

============================================================
ğŸš• PHASE 3: Ride Request and Driver Matching
============================================================

ğŸ“ Step 1: Find Available Drivers Near Pickup
System searches for drivers within 5km of pickup location...
{
  "searchRadius": 5,
  "searchLocation": {
    "latitude": 10.762622,
    "longitude": 106.660172
  }
}

ğŸ’° Step 2: Calculate Fare Estimate (via API Gateway)
Getting fare estimate through API Gateway load balancer...
{"error":"INVALID_COORDINATES","message":"Invalid request: Pickup coordinates are required","success":false}
ğŸš• Step 3: Create Trip Request (REST API)
Passenger confirms ride - creating trip in system...
Creating trip via API Gateway and capturing response...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   680    0   434  100   246   3584   2031 --:--:-- --:--:-- --:--:--  5619

Trip Response:
{"id":"b06dbd17-3226-40cb-9312-e58fb20bc7cb","passengerId":"550e8400-e29b-41d4-a716-446655440001","driverId":null,"status":"SEARCHING_DRIVER","pickupLocation":"District 1 Center","destination":"Ben Thanh Market","pickupLatitude":10.762622,"pickupLongitude":106.660172,"destinationLatitude":10.775622,"destinationLongitude":106.670172,"fare":4.72,"createdAt":"2025-11-02T13:12:40.368455699","updatedAt":"2025-11-02T13:12:40.368455699"}
Note: Using predefined TRIP_ID for demo flow: 770e8400-e29b-41d4-a716-446655440003

ğŸ¯ Step 4: Assign Best Driver (Multi-Service Integration)
System automatically assigns nearest available driver...
{"error":"INTERNAL_ERROR","message":"Error assigning driver: Trip not found with id: 770e8400-e29b-41d4-a716-446655440003","success":false}
ğŸš— Step 5: Driver Accepts Assignment
Driver status changes to BUSY - no longer available for other rides...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "status": "BUSY"
}

Press any key to continue . . .

============================================================
ğŸ“± PHASE 4: Real-Time Ride Tracking
============================================================

ğŸ”„ Step 1: Driver En Route to Pickup
Driver navigates to passenger pickup location...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "status": "EN_ROUTE"
}

ğŸ“ Step 2: Real-Time Location Updates During Approach
Simulating GPS tracking as driver approaches pickup...
   ğŸ“¡ GPS Update 1/5: Driver at 10.762672, 106.660247
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762672,
  "longitude": 106.660247
}
{"driverId":"550e8400-e29b-41d4-a716-446655440002","success":true,"latitude":10.762672,"geohash":null,"message":"Driver location updated successfully","longitude":106.660247,"timestamp":1762089161680}   ğŸ“¡ GPS Update 2/5: Driver at 10.762722, 106.660322
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762722,
  "longitude": 106.660322
}
{"driverId":"550e8400-e29b-41d4-a716-446655440002","success":true,"latitude":10.762722,"geohash":null,"message":"Driver location updated successfully","longitude":106.660322,"timestamp":1762089162362}   ğŸ“¡ GPS Update 3/5: Driver at 10.762772, 106.660397
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762772,
  "longitude": 106.660397
}
{"driverId":"550e8400-e29b-41d4-a716-446655440002","success":true,"latitude":10.762772,"geohash":null,"message":"Driver location updated successfully","longitude":106.660397,"timestamp":1762089163330}   ğŸ“¡ GPS Update 4/5: Driver at 10.762822, 106.660472
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762822,
  "longitude": 106.660472
}
{"driverId":"550e8400-e29b-41d4-a716-446655440002","success":true,"latitude":10.762822,"geohash":null,"message":"Driver location updated successfully","longitude":106.660472,"timestamp":1762089164289}   ğŸ“¡ GPS Update 5/5: Driver at 10.762872, 106.660547
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762872,
  "longitude": 106.660547
}
{"driverId":"550e8400-e29b-41d4-a716-446655440002","success":true,"latitude":10.762872,"geohash":null,"message":"Driver location updated successfully","longitude":106.660547,"timestamp":1762089165356}
ğŸ Step 3: Driver Arrives at Pickup
Driver reaches passenger location...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "status": "ARRIVED"
}

ğŸ“Š Step 4: Check Trip Status
Verify trip is progressing correctly...
{
  "tripId": "770e8400-e29b-41d4-a716-446655440003",
  "status": "REQUESTED",
  "success": true,
  "message": "Trip status retrieved successfully"
}

Press any key to continue . . .

============================================================
ğŸ›£ï¸ PHASE 5: Trip in Progress
============================================================

ğŸš— Step 1: Passenger Picked Up - Trip Starts
Driver confirms passenger pickup and starts journey...
{"error":"INTERNAL_ERROR","message":"Error updating trip status: Trip not found with id: 770e8400-e29b-41d4-a716-446655440003","success":false}
ğŸ“ Step 2: Journey Progress - Real-Time Tracking
Simulating trip progress with GPS updates...
   ğŸ›£ï¸ Journey Progress 1/8: Moving to 10.762772, 106.660272
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762772,
  "longitude": 106.660272
}
{"success":true,"latitude":10.762772,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660272,"timestamp":1762089167764}   ğŸ›£ï¸ Journey Progress 2/8: MMoving to 10.762922, 106.660372
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.762922,
  "longitude": 106.660372
}
{"success":true,"latitude":10.762922,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660372,"timestamp":1762089168276}   ğŸ›£ï¸ Journey Progress 3/8: MMoving to 10.763072, 106.660472
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.763072,
  "longitude": 106.660472
}
{"success":true,"latitude":10.763072,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660472,"timestamp":1762089169325}   ğŸ›£ï¸ Journey Progress 4/8: MMoving to 10.763222, 106.660572
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.763222,
  "longitude": 106.660572
}
{"success":true,"latitude":10.763222,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660572,"timestamp":1762089170381}   ğŸ›£ï¸ Journey Progress 5/8: MMoving to 10.763372, 106.660672
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.763372,
  "longitude": 106.660672
}
{"success":true,"latitude":10.763372,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660672,"timestamp":1762089171318}   ğŸ›£ï¸ Journey Progress 6/8: MMoving to 10.763522, 106.660772
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.763522,
  "longitude": 106.660772
}
{"success":true,"latitude":10.763522,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660772,"timestamp":1762089172371}   ğŸ›£ï¸ Journey Progress 7/8: MMoving to 10.763672, 106.660872
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.763672,
  "longitude": 106.660872
}
{"success":true,"latitude":10.763672,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660872,"timestamp":1762089173326}   ğŸ›£ï¸ Journey Progress 8/8: MMoving to 10.763822, 106.660972
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.763822,
  "longitude": 106.660972
}
{"success":true,"latitude":10.763822,"tripId":"770e8400-e29b-41d4-a716-446655440003","message":"Trip location updated successfully","longitude":106.660972,"timestamp":1762089174374}
ğŸ¯ Step 3: Approaching Destination
Driver nears Ben Thanh Market...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "latitude": 10.775622,
  "longitude": 106.670172
}

Press any key to continue . . .

============================================================
ğŸ PHASE 6: Trip Completion and Payment
============================================================

ğŸ¯ Step 1: Arrival at Destination
Driver reaches Ben Thanh Market - trip completed...
{"timestamp":"2025-11-02T13:12:56.318+00:00","status":500,"error":"Internal Server Error","path":"/api/trips/770e8400-e29b-41d4-a716-446655440003/complete"}
ğŸ’³ Step 2: Payment Processing
Processing payment through integrated payment system...
{"amount":28.5,"paymentId":"2de59e8e-f3ab-402d-a614-f1c8b0c9e4b2","success":true,"processedAt":"2025-11-02T13:12:56.359625207","paymentMethod":"CREDIT_CARD","tripId":null,"currency":"USD","message":"Payment processed successfully","transactionId":"TXN-1762089176359","status":"COMPLETED"}
â­ Step 3: Passenger Rates the Trip
Passenger provides 5-star rating and feedback...
{"id":"4b831c48-c8bc-49f9-bd5a-64814cc6642f","tripId":null,"raterId":null,"ratedEntityId":null,"ratingType":null,"rating":5,"comment":"Excellent service Very professional and safe driving.","createdAt":"2025-11-02T13:12:56.399044791"}
ğŸš— Step 4: Driver Returns to Available Status
Driver completes trip and becomes available for next ride...
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002",
  "status": "AVAILABLE"
}

Press any key to continue . . .

============================================================
ğŸ“Š PHASE 7: System Analytics and Monitoring
============================================================

ğŸ” Step 1: Final Service Health Check
Verifying all services remain healthy after the ride...

ğŸ‘¤ User Service Health:
{
  "service": "user-service-grpc",
  "status": "UP",
  "timestamp": "1762089182",
  "message": "User gRPC Service is running and healthy"
}

ğŸš— Driver Service Health:
{
  "service": "driver-service-grpc",
  "status": "UP",
  "timestamp": "1762089182",
  "message": "Driver gRPC Service is running and healthy"
}

ğŸš• Trip Service Health:
{
  "tripId": "770e8400-e29b-41d4-a716-446655440003",
  "status": "REQUESTED",
  "success": true,
  "message": "Trip status retrieved successfully"
}

ğŸ“ˆ Step 2: Message Queue Analytics
Checking RabbitMQ for event processing status...
   âœ… Message queue analytics retrieved
   ğŸ“Š Events processed successfully during ride

ğŸ”„ Step 3: Cross-Service Data Consistency Check
Verifying data consistency across all services...

ğŸ‘¤ User profile maintained:
{
  "userId": "550e8400-e29b-41d4-a716-446655440001"
}

ğŸš— Driver status updated:
{
  "driverId": "550e8400-e29b-41d4-a716-446655440002"
}